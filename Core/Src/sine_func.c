#include "../Inc/sys_init.h"

#define SINE60_INDEX ((SINE_TAB_SIZE * SINE_60_DEG) / SINE_90_DEG)
#define SINE60_VALUE qtr_sine_table[SINE60_INDEX]

const float qtr_sine_table[SINE_TAB_SIZE] = {
    0,
    0.0015355,
    0.003071,
    0.0046064,
    0.0061419,
    0.0076773,
    0.0092128,
    0.0107482,
    0.0122835,
    0.0138189,
    0.0153542,
    0.0168895,
    0.0184247,
    0.0199599,
    0.0214951,
    0.0230302,
    0.0245652,
    0.0261002,
    0.0276351,
    0.02917,
    0.0307048,
    0.0322395,
    0.0337741,
    0.0353087,
    0.0368432,
    0.0383776,
    0.0399119,
    0.0414461,
    0.0429802,
    0.0445142,
    0.0460481,
    0.0475819,
    0.0491156,
    0.0506492,
    0.0521826,
    0.0537159,
    0.0552491,
    0.0567822,
    0.0583151,
    0.0598479,
    0.0613806,
    0.0629131,
    0.0644455,
    0.0659777,
    0.0675097,
    0.0690416,
    0.0705734,
    0.0721049,
    0.0736363,
    0.0751676,
    0.0766986,
    0.0782295,
    0.0797602,
    0.0812907,
    0.082821,
    0.0843511,
    0.085881,
    0.0874107,
    0.0889402,
    0.0904695,
    0.0919985,
    0.0935274,
    0.095056,
    0.0965845,
    0.0981126,
    0.0996406,
    0.1011683,
    0.1026958,
    0.104223,
    0.10575,
    0.1072768,
    0.1088033,
    0.1103295,
    0.1118555,
    0.1133812,
    0.1149066,
    0.1164318,
    0.1179567,
    0.1194813,
    0.1210057,
    0.1225297,
    0.1240535,
    0.125577,
    0.1271001,
    0.128623,
    0.1301456,
    0.1316679,
    0.1331898,
    0.1347115,
    0.1362328,
    0.1377538,
    0.1392745,
    0.1407948,
    0.1423148,
    0.1438345,
    0.1453539,
    0.1468729,
    0.1483915,
    0.1499098,
    0.1514278,
    0.1529454,
    0.1544626,
    0.1559795,
    0.157496,
    0.1590121,
    0.1605279,
    0.1620432,
    0.1635582,
    0.1650728,
    0.1665871,
    0.1681009,
    0.1696143,
    0.1711274,
    0.17264,
    0.1741522,
    0.175664,
    0.1771754,
    0.1786864,
    0.1801969,
    0.1817071,
    0.1832168,
    0.1847261,
    0.1862349,
    0.1877433,
    0.1892512,
    0.1907587,
    0.1922658,
    0.1937724,
    0.1952786,
    0.1967843,
    0.1982895,
    0.1997942,
    0.2012985,
    0.2028023,
    0.2043057,
    0.2058085,
    0.2073109,
    0.2088128,
    0.2103141,
    0.211815,
    0.2133154,
    0.2148153,
    0.2163147,
    0.2178136,
    0.2193119,
    0.2208098,
    0.2223071,
    0.2238039,
    0.2253001,
    0.2267959,
    0.2282911,
    0.2297857,
    0.2312799,
    0.2327734,
    0.2342665,
    0.2357589,
    0.2372509,
    0.2387422,
    0.240233,
    0.2417232,
    0.2432129,
    0.244702,
    0.2461905,
    0.2476784,
    0.2491658,
    0.2506525,
    0.2521387,
    0.2536243,
    0.2551092,
    0.2565936,
    0.2580774,
    0.2595605,
    0.2610431,
    0.262525,
    0.2640063,
    0.265487,
    0.2669671,
    0.2684465,
    0.2699253,
    0.2714035,
    0.272881,
    0.2743579,
    0.2758341,
    0.2773097,
    0.2787847,
    0.2802589,
    0.2817326,
    0.2832055,
    0.2846778,
    0.2861494,
    0.2876203,
    0.2890906,
    0.2905602,
    0.2920291,
    0.2934973,
    0.2949648,
    0.2964316,
    0.2978977,
    0.2993631,
    0.3008278,
    0.3022918,
    0.3037551,
    0.3052177,
    0.3066795,
    0.3081407,
    0.3096011,
    0.3110607,
    0.3125197,
    0.3139779,
    0.3154353,
    0.3168921,
    0.318348,
    0.3198032,
    0.3212577,
    0.3227114,
    0.3241644,
    0.3256165,
    0.327068,
    0.3285186,
    0.3299685,
    0.3314176,
    0.3328659,
    0.3343134,
    0.3357601,
    0.3372061,
    0.3386512,
    0.3400956,
    0.3415391,
    0.3429819,
    0.3444238,
    0.3458649,
    0.3473052,
    0.3487447,
    0.3501834,
    0.3516212,
    0.3530583,
    0.3544944,
    0.3559298,
    0.3573643,
    0.358798,
    0.3602308,
    0.3616627,
    0.3630939,
    0.3645241,
    0.3659535,
    0.367382,
    0.3688097,
    0.3702365,
    0.3716624,
    0.3730875,
    0.3745117,
    0.375935,
    0.3773574,
    0.3787789,
    0.3801995,
    0.3816192,
    0.383038,
    0.384456,
    0.385873,
    0.3872891,
    0.3887043,
    0.3901186,
    0.3915319,
    0.3929443,
    0.3943558,
    0.3957664,
    0.3971761,
    0.3985848,
    0.3999925,
    0.4013994,
    0.4028052,
    0.4042102,
    0.4056141,
    0.4070172,
    0.4084192,
    0.4098203,
    0.4112204,
    0.4126196,
    0.4140178,
    0.415415,
    0.4168112,
    0.4182065,
    0.4196008,
    0.420994,
    0.4223863,
    0.4237776,
    0.4251679,
    0.4265572,
    0.4279454,
    0.4293327,
    0.430719,
    0.4321042,
    0.4334884,
    0.4348716,
    0.4362538,
    0.4376349,
    0.4390151,
    0.4403941,
    0.4417722,
    0.4431492,
    0.4445251,
    0.4459,
    0.4472739,
    0.4486467,
    0.4500184,
    0.4513891,
    0.4527587,
    0.4541273,
    0.4554948,
    0.4568612,
    0.4582265,
    0.4595908,
    0.4609539,
    0.462316,
    0.463677,
    0.4650369,
    0.4663957,
    0.4677534,
    0.46911,
    0.4704655,
    0.4718199,
    0.4731731,
    0.4745253,
    0.4758763,
    0.4772262,
    0.478575,
    0.4799227,
    0.4812692,
    0.4826146,
    0.4839588,
    0.485302,
    0.4866439,
    0.4879847,
    0.4893244,
    0.4906629,
    0.4920003,
    0.4933365,
    0.4946715,
    0.4960054,
    0.4973381,
    0.4986696,
    0.5,
    0.5013292,
    0.5026572,
    0.503984,
    0.5053096,
    0.506634,
    0.5079572,
    0.5092793,
    0.5106001,
    0.5119198,
    0.5132382,
    0.5145554,
    0.5158714,
    0.5171862,
    0.5184997,
    0.5198121,
    0.5211232,
    0.5224331,
    0.5237418,
    0.5250492,
    0.5263554,
    0.5276603,
    0.528964,
    0.5302665,
    0.5315677,
    0.5328676,
    0.5341663,
    0.5354637,
    0.5367599,
    0.5380548,
    0.5393484,
    0.5406408,
    0.5419319,
    0.5432217,
    0.5445102,
    0.5457975,
    0.5470835,
    0.5483681,
    0.5496515,
    0.5509336,
    0.5522144,
    0.5534939,
    0.554772,
    0.5560489,
    0.5573245,
    0.5585987,
    0.5598716,
    0.5611432,
    0.5624135,
    0.5636825,
    0.5649501,
    0.5662164,
    0.5674814,
    0.568745,
    0.5700073,
    0.5712682,
    0.5725278,
    0.573786,
    0.5750429,
    0.5762985,
    0.5775526,
    0.5788055,
    0.5800569,
    0.581307,
    0.5825557,
    0.583803,
    0.585049,
    0.5862936,
    0.5875368,
    0.5887786,
    0.590019,
    0.591258,
    0.5924957,
    0.5937319,
    0.5949668,
    0.5962002,
    0.5974322,
    0.5986629,
    0.5998921,
    0.6011199,
    0.6023463,
    0.6035712,
    0.6047948,
    0.6060169,
    0.6072376,
    0.6084568,
    0.6096747,
    0.610891,
    0.612106,
    0.6133195,
    0.6145315,
    0.6157421,
    0.6169513,
    0.618159,
    0.6193652,
    0.62057,
    0.6217733,
    0.6229752,
    0.6241755,
    0.6253745,
    0.6265719,
    0.6277678,
    0.6289623,
    0.6301553,
    0.6313468,
    0.6325369,
    0.6337254,
    0.6349124,
    0.636098,
    0.637282,
    0.6384645,
    0.6396456,
    0.6408251,
    0.6420031,
    0.6431796,
    0.6443546,
    0.645528,
    0.6467,
    0.6478704,
    0.6490393,
    0.6502066,
    0.6513725,
    0.6525368,
    0.6536995,
    0.6548607,
    0.6560204,
    0.6571785,
    0.6583351,
    0.6594901,
    0.6606436,
    0.6617955,
    0.6629458,
    0.6640946,
    0.6652418,
    0.6663875,
    0.6675315,
    0.668674,
    0.669815,
    0.6709543,
    0.6720921,
    0.6732283,
    0.6743628,
    0.6754959,
    0.6766273,
    0.6777571,
    0.6788853,
    0.6800119,
    0.6811369,
    0.6822603,
    0.6833821,
    0.6845023,
    0.6856209,
    0.6867379,
    0.6878532,
    0.6889669,
    0.690079,
    0.6911895,
    0.6922983,
    0.6934055,
    0.6945111,
    0.695615,
    0.6967173,
    0.6978179,
    0.6989169,
    0.7000143,
    0.70111,
    0.7022041,
    0.7032965,
    0.7043872,
    0.7054763,
    0.7065637,
    0.7076494,
    0.7087335,
    0.7098159,
    0.7108967,
    0.7119757,
    0.7130531,
    0.7141288,
    0.7152028,
    0.7162751,
    0.7173458,
    0.7184147,
    0.719482,
    0.7205476,
    0.7216114,
    0.7226736,
    0.723734,
    0.7247928,
    0.7258498,
    0.7269051,
    0.7279588,
    0.7290107,
    0.7300608,
    0.7311093,
    0.732156,
    0.733201,
    0.7342443,
    0.7352859,
    0.7363257,
    0.7373638,
    0.7384001,
    0.7394347,
    0.7404676,
    0.7414987,
    0.742528,
    0.7435557,
    0.7445815,
    0.7456056,
    0.746628,
    0.7476485,
    0.7486674,
    0.7496844,
    0.7506997,
    0.7517132,
    0.752725,
    0.753735,
    0.7547431,
    0.7557496,
    0.7567542,
    0.757757,
    0.7587581,
    0.7597574,
    0.7607549,
    0.7617506,
    0.7627445,
    0.7637366,
    0.7647268,
    0.7657153,
    0.766702,
    0.7676869,
    0.76867,
    0.7696512,
    0.7706307,
    0.7716083,
    0.7725841,
    0.7735581,
    0.7745302,
    0.7755006,
    0.7764691,
    0.7774358,
    0.7784006,
    0.7793636,
    0.7803248,
    0.7812841,
    0.7822416,
    0.7831972,
    0.784151,
    0.785103,
    0.7860531,
    0.7870013,
    0.7879477,
    0.7888922,
    0.7898349,
    0.7907757,
    0.7917147,
    0.7926517,
    0.793587,
    0.7945203,
    0.7954518,
    0.7963813,
    0.7973091,
    0.7982349,
    0.7991588,
    0.8000809,
    0.8010011,
    0.8019194,
    0.8028358,
    0.8037503,
    0.8046629,
    0.8055736,
    0.8064824,
    0.8073893,
    0.8082943,
    0.8091975,
    0.8100987,
    0.8109979,
    0.8118953,
    0.8127908,
    0.8136843,
    0.8145759,
    0.8154656,
    0.8163534,
    0.8172393,
    0.8181232,
    0.8190052,
    0.8198853,
    0.8207634,
    0.8216396,
    0.8225139,
    0.8233862,
    0.8242566,
    0.8251251,
    0.8259916,
    0.8268561,
    0.8277187,
    0.8285793,
    0.829438,
    0.8302948,
    0.8311496,
    0.8320024,
    0.8328532,
    0.8337021,
    0.8345491,
    0.835394,
    0.836237,
    0.8370781,
    0.8379171,
    0.8387542,
    0.8395893,
    0.8404224,
    0.8412535,
    0.8420827,
    0.8429098,
    0.843735,
    0.8445582,
    0.8453794,
    0.8461986,
    0.8470158,
    0.847831,
    0.8486442,
    0.8494555,
    0.8502647,
    0.8510719,
    0.8518771,
    0.8526803,
    0.8534814,
    0.8542806,
    0.8550778,
    0.8558729,
    0.856666,
    0.8574571,
    0.8582462,
    0.8590333,
    0.8598183,
    0.8606013,
    0.8613823,
    0.8621612,
    0.8629381,
    0.863713,
    0.8644858,
    0.8652566,
    0.8660254,
    0.8667921,
    0.8675568,
    0.8683194,
    0.86908,
    0.8698385,
    0.870595,
    0.8713494,
    0.8721018,
    0.8728521,
    0.8736004,
    0.8743466,
    0.8750907,
    0.8758328,
    0.8765728,
    0.8773108,
    0.8780467,
    0.8787805,
    0.8795122,
    0.8802419,
    0.8809695,
    0.881695,
    0.8824184,
    0.8831397,
    0.883859,
    0.8845762,
    0.8852913,
    0.8860043,
    0.8867152,
    0.8874241,
    0.8881308,
    0.8888354,
    0.889538,
    0.8902384,
    0.8909368,
    0.891633,
    0.8923272,
    0.8930192,
    0.8937092,
    0.894397,
    0.8950827,
    0.8957664,
    0.8964479,
    0.8971273,
    0.8978045,
    0.8984797,
    0.8991527,
    0.8998236,
    0.9004924,
    0.9011591,
    0.9018237,
    0.9024861,
    0.9031464,
    0.9038046,
    0.9044606,
    0.9051145,
    0.9057663,
    0.9064159,
    0.9070634,
    0.9077088,
    0.908352,
    0.9089931,
    0.909632,
    0.9102688,
    0.9109034,
    0.9115359,
    0.9121663,
    0.9127945,
    0.9134205,
    0.9140444,
    0.9146661,
    0.9152857,
    0.9159031,
    0.9165184,
    0.9171315,
    0.9177424,
    0.9183512,
    0.9189578,
    0.9195622,
    0.9201645,
    0.9207646,
    0.9213626,
    0.9219583,
    0.9225519,
    0.9231433,
    0.9237326,
    0.9243196,
    0.9249045,
    0.9254872,
    0.9260677,
    0.926646,
    0.9272222,
    0.9277962,
    0.9283679,
    0.9289375,
    0.9295049,
    0.9300701,
    0.9306331,
    0.9311939,
    0.9317526,
    0.932309,
    0.9328632,
    0.9334152,
    0.9339651,
    0.9345127,
    0.9350581,
    0.9356013,
    0.9361423,
    0.9366811,
    0.9372177,
    0.9377521,
    0.9382843,
    0.9388143,
    0.939342,
    0.9398675,
    0.9403909,
    0.940912,
    0.9414308,
    0.9419475,
    0.942462,
    0.9429742,
    0.9434842,
    0.9439919,
    0.9444975,
    0.9450008,
    0.9455019,
    0.9460008,
    0.9464974,
    0.9469918,
    0.947484,
    0.9479739,
    0.9484616,
    0.9489471,
    0.9494303,
    0.9499113,
    0.95039,
    0.9508665,
    0.9513408,
    0.9518128,
    0.9522826,
    0.9527501,
    0.9532154,
    0.9536785,
    0.9541392,
    0.9545978,
    0.9550541,
    0.9555081,
    0.9559599,
    0.9564094,
    0.9568567,
    0.9573017,
    0.9577445,
    0.958185,
    0.9586233,
    0.9590592,
    0.959493,
    0.9599244,
    0.9603536,
    0.9607806,
    0.9612052,
    0.9616276,
    0.9620478,
    0.9624656,
    0.9628812,
    0.9632946,
    0.9637056,
    0.9641144,
    0.9645209,
    0.9649252,
    0.9653271,
    0.9657268,
    0.9661242,
    0.9665194,
    0.9669122,
    0.9673028,
    0.9676911,
    0.9680771,
    0.9684608,
    0.9688423,
    0.9692215,
    0.9695983,
    0.9699729,
    0.9703452,
    0.9707152,
    0.971083,
    0.9714484,
    0.9718116,
    0.9721724,
    0.972531,
    0.9728873,
    0.9732412,
    0.9735929,
    0.9739423,
    0.9742894,
    0.9746342,
    0.9749767,
    0.9753169,
    0.9756548,
    0.9759904,
    0.9763237,
    0.9766547,
    0.9769834,
    0.9773098,
    0.9776339,
    0.9779556,
    0.9782751,
    0.9785923,
    0.9789071,
    0.9792197,
    0.9795299,
    0.9798379,
    0.9801435,
    0.9804468,
    0.9807478,
    0.9810465,
    0.9813429,
    0.9816369,
    0.9819287,
    0.9822181,
    0.9825052,
    0.98279,
    0.9830725,
    0.9833527,
    0.9836305,
    0.9839061,
    0.9841793,
    0.9844502,
    0.9847187,
    0.984985,
    0.9852489,
    0.9855105,
    0.9857698,
    0.9860267,
    0.9862814,
    0.9865337,
    0.9867837,
    0.9870313,
    0.9872766,
    0.9875196,
    0.9877603,
    0.9879986,
    0.9882346,
    0.9884683,
    0.9886997,
    0.9889287,
    0.9891554,
    0.9893797,
    0.9896017,
    0.9898214,
    0.9900388,
    0.9902538,
    0.9904665,
    0.9906769,
    0.9908849,
    0.9910905,
    0.9912939,
    0.9914949,
    0.9916936,
    0.9918899,
    0.9920839,
    0.9922755,
    0.9924648,
    0.9926518,
    0.9928364,
    0.9930187,
    0.9931987,
    0.9933763,
    0.9935516,
    0.9937245,
    0.9938951,
    0.9940633,
    0.9942292,
    0.9943927,
    0.9945539,
    0.9947128,
    0.9948693,
    0.9950235,
    0.9951753,
    0.9953248,
    0.9954719,
    0.9956167,
    0.9957591,
    0.9958992,
    0.996037,
    0.9961724,
    0.9963054,
    0.9964361,
    0.9965644,
    0.9966904,
    0.9968141,
    0.9969354,
    0.9970543,
    0.9971709,
    0.9972852,
    0.997397,
    0.9975066,
    0.9976138,
    0.9977186,
    0.9978211,
    0.9979212,
    0.998019,
    0.9981144,
    0.9982075,
    0.9982982,
    0.9983866,
    0.9984726,
    0.9985563,
    0.9986376,
    0.9987165,
    0.9987931,
    0.9988673,
    0.9989392,
    0.9990087,
    0.9990759,
    0.9991407,
    0.9992032,
    0.9992633,
    0.9993211,
    0.9993765,
    0.9994295,
    0.9994802,
    0.9995285,
    0.9995745,
    0.9996181,
    0.9996593,
    0.9996982,
    0.9997348,
    0.999769,
    0.9998008,
    0.9998302,
    0.9998574,
    0.9998821,
    0.9999045,
    0.9999246,
    0.9999422,
    0.9999576,
    0.9999705,
    0.9999811,
    0.9999894,
    0.9999953,
    0.9999988,
    1,
};

// Input  -> Degree = 0 ~ 360 degree
// Output -> Value  = 0 ~ 1
float SINE_GetSineValue(float degree)
{
    uint16_t index = SINE_GAIN * degree;
    float val;

    if (degree <= SINE_90_DEG) // 0 ~ 90 degree
    {
        index = SINE_GAIN * degree;
        val = qtr_sine_table[index];
    }
    else if (degree <= SINE_180_DEG) // 91 ~ 180 degree
    {
        index = SINE_GAIN * (SINE_180_DEG - degree);
        val = qtr_sine_table[index];
    }
    else if (degree <= SINE_270_DEG) // 181 ~ 270 degree
    {
        index = SINE_GAIN * (degree - SINE_180_DEG);
        val = -qtr_sine_table[index];
    }
    else // 271 ~ 360 degree
    {
        index = SINE_GAIN * (SINE_360_DEG - degree);
        val = -qtr_sine_table[index];
    }

    return val;
}

float SINE_GetSine60Value(void)
{
    return SINE60_VALUE; // Sine(60 degrees) = 0.866
}
